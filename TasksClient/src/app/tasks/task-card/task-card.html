<div class="card" (click)="onCardClick()">
    <div class="card-content">
        <h4 class="task-title">{{ task().title }}</h4>
        @if (task().description) {
        <p class="task-desc">{{ task().description }}</p>
        }

        <div class="actions">
            @if (task().status !== 'done') {
            <button class="btn-done" (click)="markAsDone($event)" title="×¡×™×™××ª×™!">âœ“</button>
            }
            @if (!confirmDelete()) {
            <button class="btn-delete" (click)="askToDelete($event)">ğŸ—‘ï¸</button>
            } @else {
            <div class="delete-confirmation" (click)="$event.stopPropagation()">
                <span>×‘×˜×•×—?</span>
                <button class="btn-confirm" (click)="onDelete($event)">×›×Ÿ</button>
                <button class="btn-cancel" (click)="confirmDelete.set(false)">×œ×</button>
            </div>
            }
        </div>
    </div>

    <div class="card-footer task-badges">
        <span class="badge" [class]="getPriorityClass()">
            priority: {{ task().priority }}
        </span>

        <span class="badge" [class]="getStatusClass()">
            status: {{ task().status }}
        </span>

        <button class="btn-comments-toggle" (click)="toggleComments($event)">
            ğŸ’¬ {{ showComments() ? '×¡×’×•×¨' : '×ª×’×•×‘×•×ª' }}
        </button>
    </div>

    @if (showComments()) {
    <div class="card-comments-area" (click)="$event.stopPropagation()">
        <hr />
        @if (isLoading()) {
        <p class="loading-text">×˜×•×¢×Ÿ ×ª×’×•×‘×•×ª...</p>
        } @else {
        <div class="mini-comments-list">
            @for (c of comments(); track c.id) {
            <div class="mini-comment">
                <span class="comment-text">{{ c.body }}</span>
            </div>
            } @empty {
            <p class="no-comments-text">××™×Ÿ ×ª×’×•×‘×•×ª ×œ××©×™××” ×–×•</p>
            }
        </div>
        }
    </div>
    }
</div>