<div class="projects-container">
    <div class="header">
        <div class="breadcrumb">
            <a routerLink="/teams">×¦×•×•×ª×™×</a> / <span>×¤×¨×•×™×§×˜×™×</span>
        </div>
        <button class="btn-create" (click)="showModal.set(true)">+ ×¤×¨×•×™×§×˜ ×—×“×©</button>
    </div>

    @if (isLoading()) {
    <div class="loader">×˜×•×¢×Ÿ ×¤×¨×•×™×§×˜×™×...</div>
    } @else {
    <div class="search-container">
        <input type="text" placeholder="ğŸ” ×—×¤×© ×¤×¨×•×™×§×˜×™×..." [(ngModel)]="searchQuery" class="search-input">
    </div>
    <div class="projects-grid">
        @for (project of filteredProjects(); track project.id) {
        <div class="project-card" (click)="openTasks(project.id ?? 0)">
            <div class="project-info">
                <h3>{{ project.name }}</h3>
                <p>× ×•×¦×¨ ×‘: {{ project.created_at | date:'dd/MM/yyyy' }}</p>
            </div>
            <div class="arrow">â†</div>
        </div>
        } @empty {
        <div class="empty-state">
            <p>××™×Ÿ ×¢×“×™×™×Ÿ ×¤×¨×•×™×§×˜×™× ×‘×¦×•×•×ª ×–×”.</p>
            <button (click)="showModal.set(true)">×¦×•×¨ ×¤×¨×•×™×§×˜ ×¨××©×•×Ÿ</button>
        </div>
        }
    </div>
    }

    @if (showModal()) {
    <div class="modal-overlay" (click)="showModal.set(false)">
        <div class="modal-content" (click)="$event.stopPropagation()">
            <app-project-create [teamId]="currentTeamId()!" (projectCreated)="onProjectCreated()"
                (cancel)="showModal.set(false)">
            </app-project-create>
        </div>
    </div>
    }
</div>